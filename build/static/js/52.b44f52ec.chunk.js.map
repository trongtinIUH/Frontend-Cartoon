{"version":3,"file":"static/js/52.b44f52ec.chunk.js","mappings":"6MAOe,SAASA,EAAiBC,GAAkC,IAAjC,OAAEC,EAAM,QAAEC,EAAO,UAAEC,GAAWH,EACtE,MAAOI,EAAMC,IAAWC,EAAAA,EAAAA,WAAe,OAANL,QAAM,IAANA,OAAM,EAANA,EAAQG,OAAQ,KAC1CG,EAAMC,IAAWF,EAAAA,EAAAA,WAAe,OAANL,QAAM,IAANA,OAAM,EAANA,EAAQQ,aAAc,aAChDC,EAASC,IAAcL,EAAAA,EAAAA,WAAS,GAyBvC,OACEM,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,qCAAqCG,MAAO,CAACC,SAAU,KAAKH,SAAA,EACzEC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,wCAAuCC,SAAA,EACnDF,EAAAA,EAAAA,KAACM,EAAAA,IAAM,CAACL,UAAU,SAAS,iDAI7BE,EAAAA,EAAAA,MAAA,QAAMI,SA/BGC,UAEb,GADAC,EAAEC,iBACGlB,EAAKmB,OAAV,CAKAZ,GAAW,GACX,UACQa,EAAAA,EAAcC,aAAaxB,EAAOyB,SAAU,CAAEtB,KAAMA,EAAKmB,OAAQhB,SACvEoB,EAAAA,GAAMC,QAAQ,wDACL,OAATzB,QAAS,IAATA,GAAAA,GACF,CAAE,MAAO0B,GACHC,OAAOD,GAAKE,SAAS,QAAUD,OAAOD,GAAKE,SAAS,aACtDJ,EAAAA,GAAMK,MAAM,yFAEZL,EAAAA,GAAMK,MAAM,kCAAuB,OAAHH,QAAG,IAAHA,OAAG,EAAHA,EAAKI,UAAW,wCAEpD,CAAC,QACCtB,GAAW,EACb,CAfA,MAFEgB,EAAAA,GAAMK,MAAM,kCA4BcnB,UAAU,UAASC,SAAA,EACzCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQC,SAAA,EACrBC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,yBAAwBC,SAAA,EACvCF,EAAAA,EAAAA,KAACM,EAAAA,IAAM,CAACL,UAAU,SAAS,gDAE7BD,EAAAA,EAAAA,KAAA,SACEsB,KAAK,OACLrB,UAAU,eACVsB,MAAO/B,EACPgC,SAAUf,GAAGhB,EAAQgB,EAAEgB,OAAOF,OAC9BG,YAAY,sBACZC,UAAQ,EACRC,UAAW,UAIfzB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQC,SAAA,EACrBC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,yBAAwBC,SAAA,EACvCF,EAAAA,EAAAA,KAAC6B,EAAAA,IAAS,CAAC5B,UAAU,SAAS,kBAEhCE,EAAAA,EAAAA,MAAA,UACEF,UAAU,cACVsB,MAAO5B,EACP6B,SAAUf,GAAGb,EAAQa,EAAEgB,OAAOF,OAAOrB,SAAA,EAErCF,EAAAA,EAAAA,KAAA,UAAQuB,MAAM,WAAUrB,SAAC,6BACzBF,EAAAA,EAAAA,KAAA,UAAQuB,MAAM,YAAWrB,SAAC,6BAI9BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2BAA0BC,SAAA,EACvCF,EAAAA,EAAAA,KAAA,UACEC,UAAU,oCACVqB,KAAK,SACLQ,SAAUhC,EAAQI,SAEjBJ,GACCK,EAAAA,EAAAA,MAAA4B,EAAAA,SAAA,CAAA7B,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,wCAAwCN,KAAK,WAAgB,qCAI/E,wBAGJK,EAAAA,EAAAA,KAAA,UACEsB,KAAK,SACLrB,UAAU,8CACV+B,QAAS1C,EACTwC,SAAUhC,EAAQI,SACnB,uBAQb,C","sources":["models/ModelUpdateAuthor.jsx"],"sourcesContent":["// src/models/ModelUpdateAuthor.jsx\r\nimport React, { useState } from \"react\";\r\nimport AuthorService from \"../services/AuthorService\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FaUser, FaUserTie } from \"react-icons/fa\";\r\nimport \"../css/ModelAddMovie.css\";\r\n\r\nexport default function ModelUpdateAuthor({ author, onClose, onSuccess }) {\r\n  const [name, setName] = useState(author?.name || \"\");\r\n  const [role, setRole] = useState(author?.authorRole || \"DIRECTOR\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const submit = async (e)=>{\r\n    e.preventDefault();\r\n    if (!name.trim()) {\r\n      toast.error(\"Vui lòng nhập tên!\");\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      await AuthorService.updateAuthor(author.authorId, { name: name.trim(), role });\r\n      toast.success(\"Cập nhật tác giả thành công!\");\r\n      onSuccess?.();\r\n    } catch (err) {\r\n      if (String(err).includes(\"409\") || String(err).includes(\"Duplicate\")) {\r\n        toast.error(\"Đã tồn tại tác giả với tên và vai trò này!\");\r\n      } else {\r\n        toast.error(\"Lỗi cập nhật: \" + (err?.message || \"Không thể cập nhật\"));\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"model-add-movie card shadow-lg p-4\" style={{maxWidth: 480}}>\r\n        <h4 className=\"mb-3 text-center fw-bold text-primary\">\r\n          <FaUser className=\"me-2\" />\r\n          Sửa Tác Giả/Diễn Viên\r\n        </h4>\r\n        \r\n        <form onSubmit={submit} className=\"row g-3\">\r\n          <div className=\"col-12\">\r\n            <label className=\"form-label fw-semibold\">\r\n              <FaUser className=\"me-1\" /> Tên tác giả/diễn viên\r\n            </label>\r\n            <input \r\n              type=\"text\"\r\n              className=\"form-control\" \r\n              value={name} \r\n              onChange={e=>setName(e.target.value)}\r\n              placeholder=\"Nhập tên...\"\r\n              required\r\n              maxLength={100}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"col-12\">\r\n            <label className=\"form-label fw-semibold\">\r\n              <FaUserTie className=\"me-1\" /> Vai trò\r\n            </label>\r\n            <select \r\n              className=\"form-select\" \r\n              value={role} \r\n              onChange={e=>setRole(e.target.value)}\r\n            >\r\n              <option value=\"DIRECTOR\">Đạo diễn</option>\r\n              <option value=\"PERFORMER\">Diễn viên</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"col-12 d-flex gap-2 mt-4\">\r\n            <button \r\n              className=\"btn btn-primary flex-fill fw-bold\" \r\n              type=\"submit\" \r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\r\n                  Đang cập nhật...\r\n                </>\r\n              ) : (\r\n                \"Cập nhật\"\r\n              )}\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-outline-secondary flex-fill fw-bold\" \r\n              onClick={onClose}\r\n              disabled={loading}\r\n            >\r\n              Hủy\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ModelUpdateAuthor","_ref","author","onClose","onSuccess","name","setName","useState","role","setRole","authorRole","loading","setLoading","_jsx","className","children","_jsxs","style","maxWidth","FaUser","onSubmit","async","e","preventDefault","trim","AuthorService","updateAuthor","authorId","toast","success","err","String","includes","error","message","type","value","onChange","target","placeholder","required","maxLength","FaUserTie","disabled","_Fragment","onClick"],"sourceRoot":""}